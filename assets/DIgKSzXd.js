import{c as h,a as Pe,r as B}from"./Urg1aW1i.js";var P={},W={},A={};Object.defineProperty(A,"__esModule",{value:!0});A.COMMUNITY_SITE_URL=A.IS_DEBUG_MODE=A.getProtocol=A.setProtocol=A.getSdkName=A.setSdkName=void 0;var le="@cloudbase/js-sdk";function Ce(t){le=t}A.setSdkName=Ce;function xe(){return le}A.getSdkName=xe;var ve=typeof location<"u"&&location.protocol==="http:"?"http:":"https:";function je(t){ve=t}A.setProtocol=je;function Le(){return ve}A.getProtocol=Le;A.IS_DEBUG_MODE=!1;A.COMMUNITY_SITE_URL="https://support.qq.com/products/148793";var q={};Object.defineProperty(q,"__esModule",{value:!0});q.ERRORS=void 0;q.ERRORS={INVALID_PARAMS:"INVALID_PARAMS",INVALID_SYNTAX:"INVALID_SYNTAX",INVALID_OPERATION:"INVALID_OPERATION",OPERATION_FAIL:"OPERATION_FAIL",NETWORK_ERROR:"NETWORK_ERROR",UNKOWN_ERROR:"UNKOWN_ERROR"};(function(t){var r=h&&h.__createBinding||(Object.create?function(a,o,n,s){s===void 0&&(s=n),Object.defineProperty(a,s,{enumerable:!0,get:function(){return o[n]}})}:function(a,o,n,s){s===void 0&&(s=n),a[s]=o[n]}),e=h&&h.__exportStar||function(a,o){for(var n in a)n!=="default"&&!o.hasOwnProperty(n)&&r(o,a,n)};Object.defineProperty(t,"__esModule",{value:!0}),e(A,t),e(q,t)})(W);var de={},M={},ee;(function(t){t.local="local",t.none="none",t.session="session"})(ee||(ee={}));var Te=function(){function t(){}return t}(),Me=function(){function t(){}return t}();function De(t,r,e){e===void 0&&(e={});var a=/\?/.test(r),o="";for(var n in e)o===""?!a&&(r+="?"):o+="&",o+=n+"="+encodeURIComponent(e[n]);return r+=o,/^http(s)?\:\/\//.test(r)?r:""+t+r}const Ue=Object.freeze(Object.defineProperty({__proto__:null,AbstractSDKRequest:Te,AbstractStorage:Me,get StorageType(){return ee},formatUrl:De},Symbol.toStringTag,{value:"Module"})),he=Pe(Ue);var v={},pe={exports:{}},z={exports:{}},oe;function Be(){return oe||(oe=1,function(t,r){(function(e,a){t.exports=a(B())})(h,function(e){return function(a){var o=e,n=o.lib,s=n.WordArray,f=n.Hasher,d=o.algo,i=[],c=[];(function(){function _(g){for(var b=a.sqrt(g),O=2;O<=b;O++)if(!(g%O))return!1;return!0}function m(g){return(g-(g|0))*4294967296|0}for(var p=2,l=0;l<64;)_(p)&&(l<8&&(i[l]=m(a.pow(p,1/2))),c[l]=m(a.pow(p,1/3)),l++),p++})();var u=[],y=d.SHA256=f.extend({_doReset:function(){this._hash=new s.init(i.slice(0))},_doProcessBlock:function(_,m){for(var p=this._hash.words,l=p[0],g=p[1],b=p[2],O=p[3],S=p[4],E=p[5],w=p[6],I=p[7],R=0;R<64;R++){if(R<16)u[R]=_[m+R]|0;else{var L=u[R-15],J=(L<<25|L>>>7)^(L<<14|L>>>18)^L>>>3,T=u[R-2],we=(T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10;u[R]=J+u[R-7]+we+u[R-16]}var Ee=S&E^~S&w,Re=l&g^l&b^g&b,Ae=(l<<30|l>>>2)^(l<<19|l>>>13)^(l<<10|l>>>22),Ie=(S<<26|S>>>6)^(S<<21|S>>>11)^(S<<7|S>>>25),ae=I+Ie+Ee+c[R]+u[R],Ne=Ae+Re;I=w,w=E,E=S,S=O+ae|0,O=b,b=g,g=l,l=ae+Ne|0}p[0]=p[0]+l|0,p[1]=p[1]+g|0,p[2]=p[2]+b|0,p[3]=p[3]+O|0,p[4]=p[4]+S|0,p[5]=p[5]+E|0,p[6]=p[6]+w|0,p[7]=p[7]+I|0},_doFinalize:function(){var _=this._data,m=_.words,p=this._nDataBytes*8,l=_.sigBytes*8;return m[l>>>5]|=128<<24-l%32,m[(l+64>>>9<<4)+14]=a.floor(p/4294967296),m[(l+64>>>9<<4)+15]=p,_.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var _=f.clone.call(this);return _._hash=this._hash.clone(),_}});o.SHA256=f._createHelper(y),o.HmacSHA256=f._createHmacHelper(y)}(Math),e.SHA256})}(z)),z.exports}var Q={exports:{}},ie;function We(){return ie||(ie=1,function(t,r){(function(e,a){t.exports=a(B())})(h,function(e){(function(){var a=e,o=a.lib,n=o.Base,s=a.enc,f=s.Utf8,d=a.algo;d.HMAC=n.extend({init:function(i,c){i=this._hasher=new i.init,typeof c=="string"&&(c=f.parse(c));var u=i.blockSize,y=u*4;c.sigBytes>y&&(c=i.finalize(c)),c.clamp();for(var _=this._oKey=c.clone(),m=this._iKey=c.clone(),p=_.words,l=m.words,g=0;g<u;g++)p[g]^=1549556828,l[g]^=909522486;_.sigBytes=m.sigBytes=y,this.reset()},reset:function(){var i=this._hasher;i.reset(),i.update(this._iKey)},update:function(i){return this._hasher.update(i),this},finalize:function(i){var c=this._hasher,u=c.finalize(i);c.reset();var y=c.finalize(this._oKey.clone().concat(u));return y}})})()})}(Q)),Q.exports}(function(t,r){(function(e,a,o){t.exports=a(B(),Be(),We())})(h,function(e){return e.HmacSHA256})})(pe);var He=pe.exports,_e={exports:{}};(function(t,r){(function(e,a){t.exports=a(B())})(h,function(e){return function(){var a=e,o=a.lib,n=o.WordArray,s=a.enc;s.Base64={stringify:function(d){var i=d.words,c=d.sigBytes,u=this._map;d.clamp();for(var y=[],_=0;_<c;_+=3)for(var m=i[_>>>2]>>>24-_%4*8&255,p=i[_+1>>>2]>>>24-(_+1)%4*8&255,l=i[_+2>>>2]>>>24-(_+2)%4*8&255,g=m<<16|p<<8|l,b=0;b<4&&_+b*.75<c;b++)y.push(u.charAt(g>>>6*(3-b)&63));var O=u.charAt(64);if(O)for(;y.length%4;)y.push(O);return y.join("")},parse:function(d){var i=d.length,c=this._map,u=this._reverseMap;if(!u){u=this._reverseMap=[];for(var y=0;y<c.length;y++)u[c.charCodeAt(y)]=y}var _=c.charAt(64);if(_){var m=d.indexOf(_);m!==-1&&(i=m)}return f(d,i,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function f(d,i,c){for(var u=[],y=0,_=0;_<i;_++)if(_%4){var m=c[d.charCodeAt(_-1)]<<_%4*2,p=c[d.charCodeAt(_)]>>>6-_%4*2,l=m|p;u[y>>>2]|=l<<24-y%4*8,y++}return n.create(u,y)}}(),e.enc.Base64})})(_e);var $e=_e.exports,ye={exports:{}};(function(t,r){(function(e,a){t.exports=a(B())})(h,function(e){return e.enc.Utf8})})(ye);var Ke=ye.exports,te=h&&h.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(v,"__esModule",{value:!0});v.transformPhone=v.sleep=v.printGroupLog=v.throwError=v.printInfo=v.printError=v.printWarn=v.execCallback=v.createPromiseCallback=v.removeParam=v.getHash=v.getQuery=v.toQueryString=v.createSign=v.formatUrl=v.genSeqId=v.isFormData=v.isInstanceOf=v.isNull=v.isPalinObject=v.isUndefined=v.isString=v.isArray=void 0;var ke=te(He),qe=te($e),se=te(Ke),G=W;function Ge(t){return Object.prototype.toString.call(t)==="[object Array]"}v.isArray=Ge;function Fe(t){return typeof t=="string"}v.isString=Fe;function Ve(t){return typeof t>"u"}v.isUndefined=Ve;function Je(t){return Object.prototype.toString.call(t)==="[object Object]"}v.isPalinObject=Je;function ze(t){return Object.prototype.toString.call(t)==="[object Null]"}v.isNull=ze;function Qe(t,r){return t instanceof r}v.isInstanceOf=Qe;function Ye(t){return Object.prototype.toString.call(t)==="[object FormData]"}v.isFormData=Ye;function Xe(){return Math.random().toString(16).slice(2)}v.genSeqId=Xe;function Ze(t,r,e){e===void 0&&(e={});var a=/\?/.test(r),o="";for(var n in e)o===""?!a&&(r+="?"):o+="&",o+=n+"="+encodeURIComponent(e[n]);return r+=o,/^http(s)?\:\/\//.test(r)?r:""+t+r}v.formatUrl=Ze;function Y(t){var r=qe.default.stringify(t);return r=r.replace(/=+$/,""),r=r.replace(/\+/g,"-"),r=r.replace(/\//g,"_"),r}function et(t,r){var e={alg:"HS256",typ:"JWT"},a=Y(se.default.parse(JSON.stringify(e))),o=Y(se.default.parse(JSON.stringify(t))),n=a+"."+o,s=Y(ke.default(n,r));return n+"."+s}v.createSign=et;function tt(t){t===void 0&&(t={});var r=[];for(var e in t)r.push(e+"="+encodeURIComponent(t[e]));return r.join("&")}v.toQueryString=tt;function rt(t,r){if(typeof window>"u")return!1;var e=r||window.location.search,a=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=e.substr(e.indexOf("?")+1).match(a);return o!=null?o[2]:""}v.getQuery=rt;v.getHash=function(t){if(typeof window>"u")return"";var r=window.location.hash.match(new RegExp("[#?&/]"+t+"=([^&#]*)"));return r?r[1]:""};function nt(t,r){var e=r.split("?")[0],a,o=[],n=r.indexOf("?")!==-1?r.split("?")[1]:"";if(n!==""){o=n.split("&");for(var s=o.length-1;s>=0;s-=1)a=o[s].split("=")[0],a===t&&o.splice(s,1);e=e+"?"+o.join("&")}return e}v.removeParam=nt;function at(){var t;if(!Promise){t=function(){},t.promise={};var r=function(){throw new Error('Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.')};return Object.defineProperty(t.promise,"then",{get:r}),Object.defineProperty(t.promise,"catch",{get:r}),t}var e=new Promise(function(a,o){t=function(n,s){return n?o(n):a(s)}});return t.promise=e,t}v.createPromiseCallback=at;function ot(t,r,e){if(e===void 0&&(e=null),t&&typeof t=="function")return t(r,e);if(r)throw r;return e}v.execCallback=ot;function it(t,r){console.warn("["+G.getSdkName()+"]["+t+"]:"+r)}v.printWarn=it;function st(t,r){console.error({code:t,msg:"["+G.getSdkName()+"]["+t+"]:"+r})}v.printError=st;function ct(t,r){console.log("["+G.getSdkName()+"]["+t+"]:"+r)}v.printInfo=ct;function ut(t,r){throw new Error(JSON.stringify({code:t,msg:"["+G.getSdkName()+"]["+t+"]:"+r}))}v.throwError=ut;function ft(t){var r=t.title,e=t.subtitle,a=e===void 0?"":e,o=t.content,n=o===void 0?[]:o,s=t.printTrace,f=s===void 0?!1:s,d=t.collapsed,i=d===void 0?!1:d;i?console.groupCollapsed(r,a):console.group(r,a);for(var c=0,u=n;c<u.length;c++){var y=u[c],_=y.type,m=y.body;switch(_){case"info":console.log(m);break;case"warn":console.warn(m);break;case"error":console.error(m);break}}f&&console.trace("stack trace:"),console.groupEnd()}v.printGroupLog=ft;v.sleep=function(t){return t===void 0&&(t=0),new Promise(function(r){return setTimeout(r,t)})};function lt(t){return"+86"+t}v.transformPhone=lt;var vt=h&&h.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var n in o)o.hasOwnProperty(n)&&(a[n]=o[n])},t(r,e)};return function(r,e){t(r,e);function a(){this.constructor=r}r.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}}(),C=h&&h.__assign||function(){return C=Object.assign||function(t){for(var r,e=1,a=arguments.length;e<a;e++){r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},C.apply(this,arguments)},dt=h&&h.__awaiter||function(t,r,e,a){function o(n){return n instanceof e?n:new e(function(s){s(n)})}return new(e||(e=Promise))(function(n,s){function f(c){try{i(a.next(c))}catch(u){s(u)}}function d(c){try{i(a.throw(c))}catch(u){s(u)}}function i(c){c.done?n(c.value):o(c.value).then(f,d)}i((a=a.apply(t,r||[])).next())})},ht=h&&h.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},a,o,n,s;return s={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function f(i){return function(c){return d([i,c])}}function d(i){if(a)throw new TypeError("Generator is already executing.");for(;e;)try{if(a=1,o&&(n=i[0]&2?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[i[0]&2,n.value]),i[0]){case 0:case 1:n=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,o=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!n||i[1]>n[0]&&i[1]<n[3])){e.label=i[1];break}if(i[0]===6&&e.label<n[1]){e.label=n[1],n=i;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(i);break}n[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(c){i=[6,c],o=0}finally{a=n=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(M,"__esModule",{value:!0});M.WebRequest=M.genAdapter=void 0;var pt=he,X=v,_t=A,ge=function(t){vt(r,t);function r(e){var a=t.call(this)||this,o=e.timeout,n=e.timeoutMsg,s=e.restrictedMethods;return a._timeout=o||0,a._timeoutMsg=n||"请求超时",a._restrictedMethods=s||["get","post","upload","download"],a}return r.prototype.get=function(e){return this._request(C(C({},e),{method:"get"}),this._restrictedMethods.includes("get"))},r.prototype.post=function(e){return this._request(C(C({},e),{method:"post"}),this._restrictedMethods.includes("post"))},r.prototype.put=function(e){return this._request(C(C({},e),{method:"put"}))},r.prototype.upload=function(e){var a=e.data,o=e.file,n=e.name,s=new FormData;for(var f in a)s.append(f,a[f]);return s.append("key",n),s.append("file",o),this._request(C(C({},e),{data:s,method:"post"}),this._restrictedMethods.includes("upload"))},r.prototype.download=function(e){return dt(this,void 0,void 0,function(){var a,o,n,s;return ht(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),[4,this.get(C(C({},e),{headers:{},responseType:"blob"}))];case 1:return a=f.sent().data,o=window.URL.createObjectURL(new Blob([a])),n=decodeURIComponent(new URL(e.url).pathname.split("/").pop()||""),s=document.createElement("a"),s.href=o,s.setAttribute("download",n),s.style.display="none",document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(o),document.body.removeChild(s),[3,3];case 2:return f.sent(),[3,3];case 3:return[2,new Promise(function(d){d({statusCode:200,tempFilePath:e.url})})]}})})},r.prototype._request=function(e,a){var o=this;a===void 0&&(a=!1);var n=String(e.method).toLowerCase()||"get";return new Promise(function(s){var f=e.url,d=e.headers,i=d===void 0?{}:d,c=e.data,u=e.responseType,y=e.withCredentials,_=e.body,m=e.onUploadProgress,p=X.formatUrl(_t.getProtocol(),f,n==="get"?c:{}),l=new XMLHttpRequest;l.open(n,p),u&&(l.responseType=u);for(var g in i)l.setRequestHeader(g,i[g]);var b;m&&l.upload.addEventListener("progress",m),l.onreadystatechange=function(){var S={};if(l.readyState===4){var E=l.getAllResponseHeaders(),w=E.trim().split(/[\r\n]+/),I={};w.forEach(function(R){var L=R.split(": "),J=L.shift().toLowerCase(),T=L.join(": ");I[J]=T}),S.header=I,S.statusCode=l.status;try{S.data=u==="blob"?l.response:JSON.parse(l.responseText)}catch{S.data=u==="blob"?l.response:l.responseText}clearTimeout(b),s(S)}},a&&o._timeout&&(b=setTimeout(function(){console.warn(o._timeoutMsg),l.abort()},o._timeout));var O;X.isFormData(c)?O=c:i["content-type"]==="application/x-www-form-urlencoded"?O=X.toQueryString(c):_?O=_:O=c?JSON.stringify(c):void 0,y&&(l.withCredentials=!0),l.send(O)})},r}(pt.AbstractSDKRequest);M.WebRequest=ge;function yt(){var t={root:window,reqClass:ge,wsClass:WebSocket,localStorage,sessionStorage};return t}M.genAdapter=yt;(function(t){var r=h&&h.__createBinding||(Object.create?function(i,c,u,y){y===void 0&&(y=u),Object.defineProperty(i,y,{enumerable:!0,get:function(){return c[u]}})}:function(i,c,u,y){y===void 0&&(y=u),i[y]=c[u]}),e=h&&h.__setModuleDefault||(Object.create?function(i,c){Object.defineProperty(i,"default",{enumerable:!0,value:c})}:function(i,c){i.default=c}),a=h&&h.__importStar||function(i){if(i&&i.__esModule)return i;var c={};if(i!=null)for(var u in i)u!=="default"&&Object.hasOwnProperty.call(i,u)&&r(c,i,u);return e(c,i),c};Object.defineProperty(t,"__esModule",{value:!0}),t.useDefaultAdapter=t.useAdapters=t.RUNTIME=void 0;var o=a(M),n=v,s;(function(i){i.WEB="web",i.WX_MP="wx_mp"})(s=t.RUNTIME||(t.RUNTIME={}));function f(i){for(var c=n.isArray(i)?i:[i],u=0,y=c;u<y.length;u++){var _=y[u],m=_.isMatch,p=_.genAdapter,l=_.runtime;if(m())return{adapter:p(),runtime:l}}}t.useAdapters=f;function d(){return{adapter:o.genAdapter(),runtime:s.WEB}}t.useDefaultAdapter=d})(de);var F={},H={},gt=h&&h.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var n in o)o.hasOwnProperty(n)&&(a[n]=o[n])},t(r,e)};return function(r,e){t(r,e);function a(){this.constructor=r}r.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}}(),$=h&&h.__awaiter||function(t,r,e,a){function o(n){return n instanceof e?n:new e(function(s){s(n)})}return new(e||(e=Promise))(function(n,s){function f(c){try{i(a.next(c))}catch(u){s(u)}}function d(c){try{i(a.throw(c))}catch(u){s(u)}}function i(c){c.done?n(c.value):o(c.value).then(f,d)}i((a=a.apply(t,r||[])).next())})},K=h&&h.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},a,o,n,s;return s={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function f(i){return function(c){return d([i,c])}}function d(i){if(a)throw new TypeError("Generator is already executing.");for(;e;)try{if(a=1,o&&(n=i[0]&2?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[i[0]&2,n.value]),i[0]){case 0:case 1:n=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,o=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!n||i[1]>n[0]&&i[1]<n[3])){e.label=i[1];break}if(i[0]===6&&e.label<n[1]){e.label=n[1],n=i;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(i);break}n[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(c){i=[6,c],o=0}finally{a=n=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(F,"__esModule",{value:!0});F.CloudbaseCache=void 0;var mt=he,x=v,j=W,k=function(t){gt(r,t);function r(e){var a=t.call(this)||this;return a._root=e,e.tcbCacheObject||(e.tcbCacheObject={}),a}return r.prototype.setItem=function(e,a){this._root.tcbCacheObject[e]=a},r.prototype.getItem=function(e){return this._root.tcbCacheObject[e]},r.prototype.removeItem=function(e){delete this._root.tcbCacheObject[e]},r.prototype.clear=function(){delete this._root.tcbCacheObject},r}(mt.AbstractStorage);function Z(t,r){switch(t){case"local":return r.localStorage?r.localStorage:(x.printWarn(j.ERRORS.INVALID_PARAMS,"localStorage is not supported on current platform"),new k(r.root));case"none":return new k(r.root);case"session":return r.sessionStorage?r.sessionStorage:(x.printWarn(j.ERRORS.INVALID_PARAMS,"sessionStorage is not supported on current platform"),new k(r.root));default:return r.localStorage?r.localStorage:(x.printWarn(j.ERRORS.INVALID_PARAMS,"localStorage is not supported on current platform"),new k(r.root))}}var bt=function(){function t(r){this.keys={};var e=r.persistence,a=r.platformInfo,o=a===void 0?{}:a,n=r.keys,s=n===void 0?{}:n,f=r.alwaysLocalKeys,d=f===void 0?[]:f;this._platformInfo=o,this._alwaysLocalKeys=d,this._storage||(this._persistence=o.adapter.primaryStorage||e,this._storage=Z(this._persistence,o.adapter),this.keys=s)}return Object.defineProperty(t.prototype,"mode",{get:function(){return this._storage.mode||"sync"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"persistence",{get:function(){return this._persistence},enumerable:!1,configurable:!0}),t.prototype.updatePersistence=function(r){if(this.mode==="async"){x.printWarn(j.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use updatePersistenceAsync insteed");return}if(r!==this._persistence){var e=this._persistence==="local";this._persistence=r;var a=Z(r,this._platformInfo.adapter);for(var o in this.keys){var n=this.keys[o];if(!(e&&this._alwaysLocalKeys.includes(o))){var s=this._storage.getItem(n);!x.isUndefined(s)&&!x.isNull(s)&&(a.setItem(n,s),this._storage.removeItem(n))}}this._storage=a}},t.prototype.updatePersistenceAsync=function(r){return $(this,void 0,void 0,function(){var e,a,o,n,s,f,d,i;return K(this,function(c){switch(c.label){case 0:if(r===this._persistence)return[2];e=this._persistence==="local",this._persistence=r,a=Z(r,this._platformInfo.adapter),o=[];for(n in this.keys)o.push(n);s=0,c.label=1;case 1:return s<o.length?(f=o[s],d=this.keys[f],e&&this._alwaysLocalKeys.includes(f)?[3,4]:[4,this._storage.getItem(d)]):[3,5];case 2:return i=c.sent(),!x.isUndefined(i)&&!x.isNull(i)?(a.setItem(d,i),[4,this._storage.removeItem(d)]):[3,4];case 3:c.sent(),c.label=4;case 4:return s++,[3,1];case 5:return this._storage=a,[2]}})})},t.prototype.setStore=function(r,e,a){if(this.mode==="async"){x.printWarn(j.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use setStoreAsync insteed");return}if(this._storage)try{var o={version:a||"localCachev1",content:e};this._storage.setItem(r,JSON.stringify(o))}catch(n){throw new Error(JSON.stringify({code:j.ERRORS.OPERATION_FAIL,msg:"["+j.getSdkName()+"]["+j.ERRORS.OPERATION_FAIL+"]setStore failed",info:n}))}},t.prototype.setStoreAsync=function(r,e,a){return $(this,void 0,void 0,function(){var o;return K(this,function(n){switch(n.label){case 0:if(!this._storage)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),o={version:a||"localCachev1",content:e},[4,this._storage.setItem(r,JSON.stringify(o))];case 2:return n.sent(),[3,4];case 3:return n.sent(),[2];case 4:return[2]}})})},t.prototype.getStore=function(r,e){var a;if(this.mode==="async"){x.printWarn(j.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use getStoreAsync insteed");return}try{if(typeof process<"u"&&(!((a=H)===null||a===void 0)&&a.tcb_token))return H.tcb_token;if(!this._storage)return""}catch{return""}e=e||"localCachev1";var o=this._storage.getItem(r);if(!o)return"";if(o.indexOf(e)>=0){var n=JSON.parse(o);return n.content}else return""},t.prototype.getStoreAsync=function(r,e){var a;return $(this,void 0,void 0,function(){var o,n;return K(this,function(s){switch(s.label){case 0:try{if(typeof process<"u"&&(!((a=H)===null||a===void 0)&&a.tcb_token))return[2,H.tcb_token];if(!this._storage)return[2,""]}catch{return[2,""]}return e=e||"localCachev1",[4,this._storage.getItem(r)];case 1:return o=s.sent(),o?o.indexOf(e)>=0?(n=JSON.parse(o),[2,n.content]):[2,""]:[2,""]}})})},t.prototype.removeStore=function(r){if(this.mode==="async"){x.printWarn(j.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use removeStoreAsync insteed");return}this._storage.removeItem(r)},t.prototype.removeStoreAsync=function(r){return $(this,void 0,void 0,function(){return K(this,function(e){switch(e.label){case 0:return[4,this._storage.removeItem(r)];case 1:return e.sent(),[2]}})})},t}();F.CloudbaseCache=bt;var N={},St=h&&h.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var n in o)o.hasOwnProperty(n)&&(a[n]=o[n])},t(r,e)};return function(r,e){t(r,e);function a(){this.constructor=r}r.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}}(),Ot=h&&h.__spreadArrays||function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var a=Array(t),o=0,r=0;r<e;r++)for(var n=arguments[r],s=0,f=n.length;s<f;s++,o++)a[o]=n[s];return a};Object.defineProperty(N,"__esModule",{value:!0});N.removeEventListener=N.activateEvent=N.addEventListener=N.CloudbaseEventEmitter=N.IErrorEvent=N.CloudbaseEvent=void 0;var ce=v;function wt(t,r,e){e[t]=e[t]||[],e[t].push(r)}function Et(t,r,e){if(e!=null&&e[t]){var a=e[t].indexOf(r);a!==-1&&e[t].splice(a,1)}}var re=function(){function t(r,e){this.data=e||null,this.name=r}return t}();N.CloudbaseEvent=re;var me=function(t){St(r,t);function r(e,a){var o=t.call(this,"error",{error:e,data:a})||this;return o.error=e,o}return r}(re);N.IErrorEvent=me;var be=function(){function t(){this._listeners={}}return t.prototype.on=function(r,e){return wt(r,e,this._listeners),this},t.prototype.off=function(r,e){return Et(r,e,this._listeners),this},t.prototype.fire=function(r,e){if(ce.isInstanceOf(r,me))return console.error(r.error),this;var a=ce.isString(r)?new re(r,e||{}):r,o=a.name;if(this._listens(o)){a.target=this;for(var n=this._listeners[o]?Ot(this._listeners[o]):[],s=0,f=n;s<f.length;s++){var d=f[s];d.call(this,a)}}return this},t.prototype._listens=function(r){return this._listeners[r]&&this._listeners[r].length>0},t}();N.CloudbaseEventEmitter=be;var ne=new be;function Rt(t,r){ne.on(t,r)}N.addEventListener=Rt;function At(t,r){r===void 0&&(r={}),ne.fire(t,r)}N.activateEvent=At;function It(t,r){ne.off(t,r)}N.removeEventListener=It;var Se={},V={},Nt=h&&h.__awaiter||function(t,r,e,a){function o(n){return n instanceof e?n:new e(function(s){s(n)})}return new(e||(e=Promise))(function(n,s){function f(c){try{i(a.next(c))}catch(u){s(u)}}function d(c){try{i(a.throw(c))}catch(u){s(u)}}function i(c){c.done?n(c.value):o(c.value).then(f,d)}i((a=a.apply(t,r||[])).next())})},Pt=h&&h.__generator||function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},a,o,n,s;return s={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function f(i){return function(c){return d([i,c])}}function d(i){if(a)throw new TypeError("Generator is already executing.");for(;e;)try{if(a=1,o&&(n=i[0]&2?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[i[0]&2,n.value]),i[0]){case 0:case 1:n=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,o=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!n||i[1]>n[0]&&i[1]<n[3])){e.label=i[1];break}if(i[0]===6&&e.label<n[1]){e.label=n[1],n=i;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(i);break}n[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(c){i=[6,c],o=0}finally{a=n=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(V,"__esModule",{value:!0});V.catchErrorsDecorator=void 0;var ue=v,Ct=W,U=!1;typeof navigator<"u"&&navigator.userAgent&&(U=navigator.userAgent.indexOf("Firefox")!==-1);var xt=U?/(\.js\/)?__decorate(\$\d+)?<@.*\d$/:/(\/\w+\.js\.)?__decorate(\$\d+)?\s*\(.*\)$/,Oe=/https?\:\/\/.+\:\d*\/.*\.js\:\d+\:\d+/;function jt(t){var r=t.mode,e=r===void 0?"async":r,a=t.customInfo,o=a===void 0?{}:a,n=t.title,s=t.messages,f=s===void 0?[]:s;return function(d,i,c){if(Ct.IS_DEBUG_MODE){var u=o.className||d.constructor.name,y=o.methodName||i,_=c.value,m=Lt(new Error);e==="sync"?c.value=function(){for(var p=[],l=0;l<arguments.length;l++)p[l]=arguments[l];var g=fe({err:new Error,className:u,methodName:y,sourceLink:m});try{return _.apply(this,p)}catch(w){var b=w,O=w.message,S={title:n||u+"."+y+" failed",content:[{type:"error",body:w}]};if(O&&/^\{.*\}$/.test(O)){var E=JSON.parse(O);S.subtitle=O,E.code&&(g?(g.code=E.code,g.msg=E.msg):(w.code=E.code,w.message=E.msg),b=g||w,S.content=f.map(function(I){return{type:"info",body:I}}))}throw ue.printGroupLog(S),b}}:c.value=function(){for(var p=[],l=0;l<arguments.length;l++)p[l]=arguments[l];return Nt(this,void 0,void 0,function(){var g,b,O,S,E,w;return Pt(this,function(I){switch(I.label){case 0:g=fe({err:new Error,className:u,methodName:y,sourceLink:m}),I.label=1;case 1:return I.trys.push([1,3,,4]),[4,_.apply(this,p)];case 2:return[2,I.sent()];case 3:throw b=I.sent(),O=b,S=b.message,E={title:n||u+"."+y+" failed",content:[{type:"error",body:b}]},S&&/^\{.*\}$/.test(S)&&(w=JSON.parse(S),E.subtitle=w,w.code&&(g?(g.code=w.code,g.message=w.msg):(b.code=w.code,b.message=w.msg),O=g||b,E.content=f.map(function(R){return{type:"info",body:R}}))),ue.printGroupLog(E),O;case 4:return[2]}})})}}}}V.catchErrorsDecorator=jt;function Lt(t){var r="",e=t.stack.split(`
`),a=e.findIndex(function(n){return xt.test(n)});if(a!==-1){var o=Oe.exec(e[a+1]||"");r=o?o[0]:""}return r}function fe(t){var r=t.err,e=t.className,a=t.methodName,o=t.sourceLink;if(!o)return null;var n=r.stack.split(`
`),s=U?/^catchErrorsDecorator\/<\/descriptor.value@.*\d$/:new RegExp(e+"\\.descriptor.value\\s*\\[as\\s"+a+"\\]\\s*\\(.*\\)$"),f=U?/^catchErrorsDecorator\/<\/descriptor.value/:new RegExp(e+"\\.descriptor.value\\s*\\[as\\s"+a+"\\]"),d=n.findIndex(function(u){return s.test(u)}),i;if(d!==-1){var c=n.filter(function(u,y){return y>d});c.unshift(n[d].replace(f,e+"."+a).replace(Oe,o)),i=new Error,i.stack=(U?"@debugger":"Error")+`
`+c.join(`
`)}return i}(function(t){var r=h&&h.__createBinding||(Object.create?function(a,o,n,s){s===void 0&&(s=n),Object.defineProperty(a,s,{enumerable:!0,get:function(){return o[n]}})}:function(a,o,n,s){s===void 0&&(s=n),a[s]=o[n]}),e=h&&h.__exportStar||function(a,o){for(var n in a)n!=="default"&&!o.hasOwnProperty(n)&&r(o,a,n)};Object.defineProperty(t,"__esModule",{value:!0}),e(V,t)})(Se);var Tt=h&&h.__createBinding||(Object.create?function(t,r,e,a){a===void 0&&(a=e),Object.defineProperty(t,a,{enumerable:!0,get:function(){return r[e]}})}:function(t,r,e,a){a===void 0&&(a=e),t[a]=r[e]}),Mt=h&&h.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),D=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var e in t)e!=="default"&&Object.hasOwnProperty.call(t,e)&&Tt(r,t,e);return Mt(r,t),r};Object.defineProperty(P,"__esModule",{value:!0});var Dt=P.helpers=Ft=P.utils=qt=P.events=Kt=P.cache=Ht=P.adapters=Bt=P.constants=void 0,Ut=D(W),Bt=P.constants=Ut,Wt=D(de),Ht=P.adapters=Wt,$t=D(F),Kt=P.cache=$t,kt=D(N),qt=P.events=kt,Gt=D(v),Ft=P.utils=Gt,Vt=D(Se);Dt=P.helpers=Vt;export{Te as A,ee as S,Kt as a,Ht as b,Bt as c,qt as e,De as f,Dt as h,Ft as u};
